### 1.1  认识API网关

#### 1.1.1  API网关是什么

API网关（API Gateway），字面意思是将所有API的调用统一接入API网关层，由网关层负责接入和输出

单体应用时代，在业务简单、团队组织规模小的时候，常常把功能都集中于一个应用中，统一部署、统一测试

随着业务的迅速发展，组织成员日益增多。将所有的功能集中在一个Tomcat中的时候，每更新一个功能模块，势必要更新所有的程序，牵一发动全身，系统难以维护

微服务将单体应用进行微服务化，将原来集中于一体的功能（比如商品功能、订单功能）进行拆分，这样就解决了单体应用下的弊端。

API Gateway很好地解决了微服务下客户端调用、统一接入的问题

有了API网关之后，各个API服务提供团队可以专注于自己的业务逻辑处理，而API网关更专注于安全、流量、路由等问题

#### 网关与代理

代理是纯粹的数据透传，协议不会发生变化；网关在数据透传的背景下，还会涉及协议的转换，HTTP通过网关透传到下游则可能已经转换成企业内部的RPC了

---

#### API网关涵盖的基本功能

一个API网关的基本功能包括统一接入、协议适配、流量管理与容错，以及安全防护，这四大基本功能构成了网关的核心能力

---

#### API的生命周期

RAML、Swagger是两个在设计API时候常用的工具

RAML定义了API的Design、Build、Test、Document、Share五个过程

Swagger定义了API的Design、Build、Document、Test、Standardize五个过程

设计——构建——文档——测试——分享——运行——下线

---

#### 泛化调用

使用泛化调用的网关系统只需要集成RPC基础的一个JAR包即可，其余的接口都通过泛化来调用服务的实现，这样无论网关系统承载多少个接口，都不需要在引入多余的JAR包了

泛化调用并不是一种很神秘的技术，仍然是在基于RPC底层通信的框架基础之上进行调用的，跟普通的RPC调用的区别就在于不需要接口提供者的客户端JAR包了

如何把API发布到网关系统中，实际问题是需要利用什么方法将RPC环境下的API让网关系统也能识别，剩余的工作还是交给RPC本身去完成，包括序列化、反序列化、长连接等。

有了泛化调用作为基础支持，需要做的就是将API通过一种方式存储到网关系统能够访问的数据存储中，为了提高系统的性能，一般会选择Redis存储。